<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<!-- three.js library -->
<script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<style>
    #arjsDebugUIContainer{
        display: none;
    }
    
    .a-enter-vr{
      display: none;  
    }

    #texture{

    }

    
    
    </style>
  <script>
    var velocityValue = 0.005;
AFRAME.registerComponent('test', {
  schema: {default: ''},
  init:function(){
    this.plane = document.querySelector(this.data);
    this.direction = -1;
    this.currentTime = 0;
    this.currentValue = 1;
    this.textureWidth = this.plane.object3D.children[0].material.map.image.width;
    this.textureHeight = this.plane.object3D.children[0].material.map.image.height;
    //console.log(this.plane)
    this.plane.object3D.children[0].material.needsUpdate=true;
  },
  tick:function(time,deltaTime){
    
    if(this.el.object3D.visible == true){
      //if()
      //this.plane.setAttribute("material","repeat",{x:0.5,y:0.5})
      this.plane.object3D.children[0].material.needsUpdate = true;
      this.plane.object3D.children[0].material.map.repeat.set(this.currentValue,this.currentValue);
      var offsetX = (((this.textureWidth/this.currentValue)-this.textureWidth)/2)/this.textureWidth;
      var offsetY = (((this.textureHeight/this.currentValue)-this.textureHeight)/2)/this.textureHeight;
      //console.log(offsetX,this.textureWidth)
      //console.log(this.plane.object3D.children[0].material.map)
      this.plane.object3D.children[0].material.map.offset.set(offsetX,offsetY);
      this.currentValue+=this.direction*velocityValue;
      if(this.currentValue<0.8){
        this.direction = 1;
      }
      else if(this.currentValue >1){
        this.direction = -1;
      }
    }
    else{
      this.direction = -1;
      this.currentValue = 1;
    }

}
        
});
      
  		
      
  </script>
 
    
<body style="margin : 0px; overflow: hidden;">
   
    
  <a-scene embedded arjs="sourceType: webcam;">

    
    <a-assets>
        <img class="mask" id="texture1God" src="assets/ans1/ans1_good.jpg">
    </a-assets>

    <a-assets>
        <img id="texture1Bad1" src="assets/ans1/ans1_wrong.jpg">
    </a-assets>

    <a-assets>
        <img id="texture1Bad2" src="assets/ans1/ans1_wrong.jpg">
    </a-assets>

    <a-marker  type='pattern' preset='custom' url='data/data/pattern_1.patt' test="#planeAns1Good">

      <a-box position='0 0.5 0' material='opacity: 0.9;'></a-box>
      <a-plane id="planeAns1Good"src="#texture1God" height="1" width="1" position="0 1.05 0" rotation="-90 0 0">
        <!--<a-animation attribute="material.repeat" dur="10000" fill ="forwards" to="0.5 0.5" repeat="indefinite"></a-animation>-->
      </a-plane>
    </a-marker>

    <a-marker  type='pattern' preset='custom' url='data/data/pattern_1B.patt' test="#planeAns1Bad1">

      <a-box position='0 0.5 0' material='opacity: 0.9;'></a-box>
      <a-plane id="planeAns1Bad1" src="#texture1Bad1" height="1" width="1" position="0 1.05 0" rotation="-90 0 0"></a-plane>
    </a-marker>

    <a-marker  type='pattern' preset='custom' url='data/data/pattern_1B2.patt' test="#planeAns1Bad2">

      <a-box position='0 0.5 0' material='opacity: 0.9;'></a-box>
      <a-plane id="planeAns1Bad2" src="#texture1Bad2" height="1" width="1" position="0 1.05 0" rotation="-90 0 0"></a-plane>
    </a-marker>

      
<a-entity camera></a-entity>   
  </a-scene>
    
    
    
    
</body>

</html>
